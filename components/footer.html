<footer class="bg-gray-800 text-white py-12">
    <div class="container mx-auto px-4">
        <div class="grid md:grid-cols-4 gap-8">
            <div>
                <div class="flex items-center space-x-2 mb-4">
                    <img src="images/logo-footer.png" alt="OncoHarmony Logo" class="h-20 w-20 object-contain">
                    <span class="text-xl font-bold">OncoHarmony</span>
                </div>
                <p class="text-gray-400 mb-4" id="footer-description">
                    Advancing Immuno-oncology through collaborative multi-omics research.
                </p>
                <div class="flex space-x-4">
                    <a href="https://github.com/OncoHarmony-Network" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fab fa-github text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fab fa-twitter text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fab fa-linkedin text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fab fa-researchgate text-xl"></i>
                    </a>
                </div>
            </div>
            
            <div>
                <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                <ul class="space-y-2">
                    <li><a href="index.html" class="text-gray-400 hover:text-white transition-colors">Home</a></li>
                    <li><a href="about.html" class="text-gray-400 hover:text-white transition-colors">About</a></li>
                    <li><a href="members.html" class="text-gray-400 hover:text-white transition-colors">Members</a></li>
                    <li><a href="publications.html" class="text-gray-400 hover:text-white transition-colors">Publications</a></li>
                    <li><a href="projects.html" class="text-gray-400 hover:text-white transition-colors">Projects</a></li>
                </ul>
            </div>
            
            <div>
                <h3 class="text-lg font-semibold mb-4">Contact</h3>
                <ul class="space-y-2">
                    <li class="flex items-start">
                        <i class="fas fa-envelope text-purple-400 mr-3 mt-1"></i>
                        <span class="text-gray-400">wangshx@csu.edu.cn</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-map-marker-alt text-purple-400 mr-3 mt-1"></i>
                        <span class="text-gray-400">Collaborative Network</span>
                    </li>
                </ul>
            </div>
            
            <div>
                <h3 class="text-lg font-semibold mb-4">Institutions</h3>
                <ul class="space-y-2" id="footer-institutions">
                    <!-- Default institutions list - will be updated dynamically -->
                    <li><a href="https://zhoulab.ac.cn/" class="text-gray-400 hover:text-white transition-colors">Zhou Lab</a></li>
                    <li><a href="https://faculty.csu.edu.cn/wangshixiang" class="text-gray-400 hover:text-white transition-colors">Wang Lab</a></li>
                    <li><a href="https://faculty.csu.edu.cn/lixuejun/zh_CN/index.htm" class="text-gray-400 hover:text-white transition-colors">Xuejun Li Lab</a></li>
                    <li><a href="https://genaimed.org/" class="text-gray-400 hover:text-white transition-colors">Robin Luo Lab</a></li>
                    <li><a href="https://yulab-smu.top/" class="text-gray-400 hover:text-white transition-colors">Guangchuang Yu Lab</a></li>
                </ul>
            </div>
        </div>
        
        <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-500">
            <p>&copy; 2025 OncoHarmony Network. All rights reserved.</p>
            <div class="mt-4 flex justify-center">
                <a href='https://clustrmaps.com/site/1c2j5' title='Visit tracker'><img src='//clustrmaps.com/map_v2.png?cl=ffffff&w=a&t=tt&d=EAHUiyENL7ZH5qYeVHnr5TyNq-1zKxollsI6RW1iSYw'/></a>
            </div>
        </div>
    </div>
</footer>

<script>
    // Update footer data from general.yml if dataLoader is available
    window.updateFooterFromDataLoader = function() {
        console.log('updateFooterFromDataLoader called');
        
        if (typeof dataLoader !== 'undefined') {
            console.log('dataLoader is available');
            
            dataLoader.load().then(function(data) {
                console.log('Data loaded:', data);
                
                if (data.general && data.general.contact && data.general.contact.footer) {
                    var footerData = data.general.contact.footer;
                    console.log('Footer data:', footerData);
                    
                    // Update footer description
                    var footerDescription = document.getElementById('footer-description');
                    if (footerDescription && footerData.description) {
                        footerDescription.textContent = footerData.description;
                    }
                    
                    // Update institutions
                    var institutionsContainer = document.getElementById('footer-institutions');
                    if (institutionsContainer && footerData.institutions) {
                        var institutions = footerData.institutions;
                        console.log('Updating institutions:', institutions);
                        
                        institutionsContainer.innerHTML = '';
                        
                        if (Array.isArray(institutions)) {
                            institutions.forEach(function(institution) {
                                if (institution.name && institution.link) {
                                    var li = document.createElement('li');
                                    var a = document.createElement('a');
                                    a.href = institution.link;
                                    a.className = 'text-gray-400 hover:text-white transition-colors';
                                    a.textContent = institution.name;
                                    li.appendChild(a);
                                    institutionsContainer.appendChild(li);
                                }
                            });
                        }
                    }
                }
            }).catch(function(error) {
                console.error('Error loading data:', error);
            });
        } else {
            console.error('dataLoader is not available');
        }
    };
    
    // Automatically try to update footer when the script loads
    if (typeof window.updateFooterFromDataLoader === 'function') {
        // Try to update footer immediately
        window.updateFooterFromDataLoader();
        
        // Also set a timeout to ensure it runs after page loads
        setTimeout(window.updateFooterFromDataLoader, 1000);
    }
</script>
